<?php

if (!defined('SHAISHAI')) { exit(1); }

class GetprizeuserAction extends ShaiAction
{
    
    function handle($args)
    {
    	parent::handle($args);
    	
    	$q = $this->trimmed('q');
    	$activityType = substr($q, 0, 1);
    	$activityCode = substr($q, 2);
    	
//    	$ids = array(100000, 100001, 100002, 100003);
    	
    	$this->showJsonResult(array('s' => $this->showUsers($activityType, $activityCode)));
    }
    
    function showUsers($type, $code) {
    	$awards = array('1' => array(
    			// 天天有奖拿
    			'20100604' => array(100355,100353,100348,100339,100336,100335,100272,100277, 100039, 100051),
    			'20100605' => array(100278, 100405, 100188, 100313, 100168, 100254, 100367, 100411, 100341, 100382),
    			'20100606' => array(100295,100376,100345,100178,100374,100143,100161,100141,100172,100311),
    			'20100607' => array(100282,100329,100450,100033,100366,100019,100396,100190,100262,100079),
    			'20100608' => array(100018,100163,100046,100378,100381,100165,100036,100475,100159,100064),
    			'20100609' => array(100179,100121,100069,100421,100274,100427,100028,100454,100306,100289),
    			'20100610' => array(100322,100132,100074,100349,100140,100255,100220,100118,100104,100403),
    			'20100611' => array(100456,100309,100042,100015,100092,100052,100100,100007,100001,100351),
    			'20100612' => array(100375,100332,100059,100021,100145,100399,100184,100498,100352,100265),
    			'20100613' => array(100093,100448,100342,100025,100008,100379,100123,100091,100541,100260),
    			'20100614' => array(100354,100181,100083,100408,100114,100167,100149,100594,100556,100153),
    			'20100615' => array(100293,100135,100431,100407,100531,100602,100170,100537,100667,100154),
    			'20100616' => array(100426,100090,100292,100647,100080,100037,100482,100146,100380,100034),
    			'20100617' => array(100562,100180,100655,100576,100112,100010,100236,100654,100593,100134),
    			'20100618' => array(100301,100432,100555,100563,100401,100182,100598,100522,100003,100287),
    			'20100619' => array(100564,100196,100067,100210,100493,100259,100526,100478,100049,100082),
    			'20100620' => array(100030,100155,100115,100420,100264,100054,100377,100056,100039,100761),
    			'20100621' => array(100701,100103,100048,100714,100012,100011,100338,100071,100710,100294),
    			'20100622' => array(100187,100055,100109,100425,100014,100065,100479,100022,100711,100142),
    			'20100623' => array(100189,100585,100299,100185,100101,100266,100718,100148,100424,100096),
    			'20100624' => array(100208,100038,100540,100027,100539,100410,100369,100597,100691,100127),
    			'20100625' => array(100686,100098,100646,100136,100582,100645,100076,100570,100032,100603),
    			'20100626' => array(100044,100487,100267,100532,100129,100684,100045,100801,100610,100616),
    			'20100627' => array(100464,100395,100253,100057,100206,100477,100006,100137,100347,100579),
    			'20100628' => array(100296,100105,100557,100485,100571,100393,100671,100465,100237,100303),
    			'20100629' => array(100128,100392,100144,100183,100697,100120,100533,100419,100319,100204),
    			'20100630' => array(100000,100357,100229,100543,100449,100017,100447,100343,100704,100035)
    		),
    		'2' => array(
    			// 赢内号得G币
    			
    		),
    		'3' => array(
    			// 点卡大赠送
    		),
    		'4' => array(
    			// 游虎大放送
    		));
    	
    	$html = '';
    	$profile = Profile::getProfileByIds($awards[$type][$code]);
    	while ($profile->fetch()) {
    		$avatar = $profile->getAvatar(AVATAR_STREAM_SIZE);
    		$html .= '<li><div class="avatar"><a href="' . $profile->profileurl . '" target="_blank"><img src="' . (($avatar) ? $avatar->displayUrl() : Avatar::defaultImage(AVATAR_STREAM_SIZE, $profile->id, $profile->sex)) . '" alt="去' . $profile->nickname . '的主页看看" /></a></div><p><a href="' . $profile->profileurl . '" target="_blank">' . $profile->nickname . '</a></p></li>';
    	}
    	return $html;
    }
}